<?xml version="1.0" encoding="UTF-8"?>
<beans
    xsi:schemaLocation=" http://www.springframework.org/schema/beans 
  http://www.springframework.org/schema/beans/spring-beans.xsd     
  http://www.springframework.org/schema/context  
  http://www.springframework.org/schema/context/spring-context.xsd 
  http://www.springframework.org/schema/integration
  http://www.springframework.org/schema/integration/spring-integration.xsd
  http://www.springframework.org/schema/integration/file
  http://www.springframework.org/schema/integration/file/spring-integration-file.xsd
  http://www.springframework.org/schema/batch 
  http://www.springframework.org/schema/batch/spring-batch.xsd
  "
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:batch="http://www.springframework.org/schema/batch" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:si="http://www.springframework.org/schema/integration" 
    xmlns:file="http://www.springframework.org/schema/integration/file" 
    xmlns="http://www.springframework.org/schema/beans"
    default-autowire="byName">

  <!-- Steps and Flows usable regardless of job, sample or run -->

  <!-- finish --> 
  <!--   - sets current state to final -->

  <bean id="wasp.default.FinalStep" parent="parentStateStep">
    <property name="itemProcessor">
      <bean class="edu.yu.einstein.wasp.batch.StateFinalProcessor"/>
    </property>
  </bean>


  <batch:flow id="wasp.default.FinalFlow">
    <batch:step id="wasp.default.FinalFlow0" parent="wasp.default.FinalStep" />
  </batch:flow>

  <!-- /finish --> 


  <!-- waitForChildrenFinal -->
  <!--   - scans sourcestateid for state and checks if all are 'FINAL' -->

  <bean id="wasp.default.WaitForChildrenFinalStep" parent="parentStateStep">
    <property name="itemProcessor">
      <bean class="edu.yu.einstein.wasp.batch.WaitForChildrenStateFinalProcessor" />
    </property>
  </bean>

  <batch:flow id="wasp.default.WaitForChildrenFinalFlow">
    <batch:step id="wasp.default.WaitForChildrenFinalFlow0" parent="wasp.default.WaitForChildrenFinalStep" />
  </batch:flow>

  <!-- /waitForChildrenFinal -->


</beans>
